(function(){"use strict";var t={5772:function(t,e,n){n(6992),n(8674),n(9601),n(7727);var o=n(144),i=n(4720),a=n.n(i),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-header",[n("el-steps",{attrs:{space:200,active:t.step,"finish-status":"success",simple:""}},[n("el-step",{attrs:{title:"Input Sentence",icon:"el-icon-edit"}}),n("el-step",{attrs:{title:"Actor Entity",icon:"el-icon-plus"}}),n("el-step",{attrs:{title:"Actor Relation",icon:"el-icon-plus"}}),n("el-step",{attrs:{title:"Intention Entity",icon:"el-icon-plus"}}),n("el-step",{attrs:{title:"Intention Matching",icon:"el-icon-plus"}}),n("el-step",{attrs:{title:"Finish",icon:"el-icon-picture"}})],1)],1),0===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("el-input",{attrs:{rows:12,type:"textarea",placeholder:"Please input req text..."},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)],1)],1),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:18}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.nextToAE}},[t._v(" Next ")])],1)],1)],1)],1):t._e(),1===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("entity-editor",{attrs:{"data-app":"",rtl:!1,text:this.text,entities:this.mockAnnotator.AE.entities,"entity-labels":this.mockAnnotator.AE.entityLabels,relations:this.mockAnnotator.AE.relations,"relation-labels":this.mockAnnotator.AE.relationLabels,"allow-overlapping":!1,"grapheme-mode":!1,"selected-label":null,"relation-mode":!1},on:{addEntity:t.handleAEAddSpan,"click:entity":t.handleAEEntityChange,"contextmenu:entity":t.handleAEDeleteSpan}})],1)],1)],1),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:16}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.prevToBegin}},[t._v(" Back ")])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.nextToAR}},[t._v(" Next ")])],1)],1)],1)],1):t._e(),2===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("entity-editor",{attrs:{"data-app":"",rtl:!1,text:this.text,entities:this.mockAnnotator.AE.entities,"entity-labels":this.mockAnnotator.AE.entityLabels,relations:this.mockAnnotator.AR.relations,"relation-labels":this.mockAnnotator.AR.relationLabels,"allow-overlapping":!1,"grapheme-mode":!1,"selected-label":null,"relation-mode":!0},on:{addRelation:t.handleARAddRelation,"click:relation":t.updateARRelation,"contextmenu:relation":t.deleteARRelation}})],1)],1)],1),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:16}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.prevToAE}},[t._v(" Back ")])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.nextToIE}},[t._v(" Next ")])],1)],1)],1)],1):t._e(),3===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("entity-editor",{attrs:{"data-app":"",rtl:!1,text:this.text,entities:this.mockAnnotator.IE.entities,"entity-labels":this.mockAnnotator.IE.entityLabels,relations:this.mockAnnotator.IE.relations,"relation-labels":this.mockAnnotator.IE.relationLabels,"allow-overlapping":!0,"grapheme-mode":!1,"selected-label":null,"relation-mode":!1},on:{addEntity:t.handleIEAddSpan,"click:entity":t.handleIEEntityChange,"contextmenu:entity":t.handleIEDeleteSpan}})],1)],1)],1),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:16}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.prevToAR}},[t._v(" Back ")])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.nextToII}},[t._v(" Next ")])],1)],1)],1)],1):t._e(),4===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" "+t._s(t.text)+" ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" Please match corresponding intentions（texts are editable）： ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),t._l(t.mockAnnotator.II.select,(function(e){return n("div",{key:e.id},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5,offset:6}},[n("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",filterable:"",placeholder:"请选择（可编辑）"},model:{value:e.pid,callback:function(n){t.$set(e,"pid",n)},expression:"item.pid"}},t._l(t.mockAnnotator.II.phrases,(function(t){return n("el-option",{key:t.id,attrs:{label:t.text,value:t.id}})})),1)],1),n("el-col",{attrs:{span:5,offset:0}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.oid,callback:function(n){t.$set(e,"oid",n)},expression:"item.oid"}},t._l(t.mockAnnotator.II.options,(function(t){return n("el-option",{key:t.rid,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-col",{attrs:{span:2,offset:0}},[n("el-button",{attrs:{plain:""},on:{click:function(n){return t.delIISelect(e.id)}}},[t._v(" x ")])],1)],1)],1)})),n("div",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:7,offset:11}},[n("el-button",{attrs:{plain:""},on:{click:t.addIISelect}},[t._v(" + ")])],1)],1)],1)],2),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:16}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.prevToIE}},[t._v(" Back ")])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.nextToFin}},[t._v(" Next ")])],1)],1)],1)],1):t._e(),5===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" Please confirm the iStar model: ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" Entity extraction ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.entityTable}},[n("el-table-column",{attrs:{prop:"type",label:"类型",width:"180"}}),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" Relation extraction ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.relationTable}},[n("el-table-column",{attrs:{prop:"type",label:"Type",width:"180"}}),n("el-table-column",{attrs:{prop:"src",label:"From",width:"180"}}),n("el-table-column",{attrs:{prop:"dest",label:"To",width:"180"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" Intention matching ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.intentionTable}},[n("el-table-column",{attrs:{prop:"name",label:"Name",width:"180"}}),n("el-table-column",{attrs:{prop:"pType",label:"Intention type",width:"180"}}),n("el-table-column",{attrs:{prop:"dType",label:"Destination Type",width:"180"}}),n("el-table-column",{attrs:{prop:"dest",label:"Destination",width:"180"}})],1)],1)],1)],1),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:18}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.prevToII}},[t._v(" Back ")])],1)],1)],1)],1):t._e()],1)},s=[],r=n(4367),c=(n(1539),n(4747),n(9826),n(561),n(4553),n(7042),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{shortkey:t.cleanUp}},[n("v-annotator",{attrs:{rtl:t.rtl,text:t.text,entities:t.entities,"entity-labels":t.entityLabels,relations:t.relations,"relation-labels":t.relationLabels,"allow-overlapping":t.allowOverlapping,"grapheme-mode":t.graphemeMode,"selected-entities":t.selectedEntities},on:{"add:entity":t.handleAddEvent,"click:entity":t.onEntityClicked,"click:relation":t.onRelationClicked,"contextmenu:entity":t.deleteEntity,"contextmenu:relation":t.deleteRelation}}),n("labeling-menu",{attrs:{opened:t.entityMenuOpened,x:t.x,y:t.y,"selected-label":t.currentLabel,labels:t.entityLabels},on:{close:t.cleanUp,"click:label":t.addOrUpdateEntity}}),n("labeling-menu",{attrs:{opened:t.relationMenuOpened,x:t.x,y:t.y,"selected-label":t.currentRelationLabel,labels:t.relationLabels},on:{close:t.cleanUp,"click:label":t.addOrUpdateRelation}})],1)}),d=[],u=n(5200),f=n(4074),p=n.n(f),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{value:t.opened,"position-x":t.x,"position-y":t.y,absolute:"","offset-y":""},on:{input:t.close}},[n("v-list",{staticClass:"overflow-y-auto",attrs:{dense:"","min-width":"150","max-height":"400"}},[n("v-list-item",[n("v-autocomplete",{ref:"autocomplete",attrs:{items:t.labels,autofocus:"",dense:"","deletable-chips":"","hide-details":"","item-text":"text","item-value":"id",label:"Select a label","small-chips":""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._l(t.labels,(function(e,o){return n("v-list-item",{key:o,on:{click:function(n){return t.onLabelSelected(e.id)}}},[t.hasAnySuffixKey?n("v-list-item-action",[e.suffixKey?n("v-chip",{attrs:{color:e.backgroundColor,outlined:"",small:""},domProps:{textContent:t._s(e.suffixKey)}}):n("span",{staticClass:"mr-8"})],1):t._e(),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1)}))],2)],1)},b=[],m=(n(9653),o["default"].extend({props:{labels:{type:Array,default:function(){return[]},required:!0},opened:{type:Boolean,default:!1,required:!0},selectedLabel:{type:Object,default:null,required:!1},x:{type:Number,default:0,required:!0},y:{type:Number,default:0,required:!0}},data:function(){return{startOffset:0,endOffset:0,entity:null,fromEntity:null,toEntity:null}},computed:{hasAnySuffixKey:function(){return this.labels.some((function(t){return null!==t.suffixKey}))},value:{get:function(){return this.selectedLabel},set:function(t){this.onLabelSelected(t)}}},methods:{close:function(){var t=this;this.$nextTick((function(){t.$refs.autocomplete&&(t.$refs.autocomplete.selectedItems=[])})),this.$emit("close")},onLabelSelected:function(t){this.$emit("click:label",t),this.close()}}})),y=m,v=n(1001),A=n(3453),k=n.n(A),g=n(1119),x=n(5424),I=n(8346),E=n(7620),w=n(3099),O=n(2786),T=n(9904),L=(0,v.Z)(y,h,b,!1,null,null,null),R=L.exports;k()(L,{VAutocomplete:g.Z,VChip:x.Z,VList:I.Z,VListItem:E.Z,VListItemAction:w.Z,VListItemContent:O.km,VListItemTitle:O.V9,VMenu:T.Z});var _=o["default"].extend({components:{VAnnotator:p(),LabelingMenu:R},props:{dark:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},text:{type:String,default:"",required:!0},entities:{type:Array,default:function(){return[]},required:!0},entityLabels:{type:Array,default:function(){return[]},required:!0},relations:{type:Array,default:function(){return[]}},relationLabels:{type:Array,default:function(){return[]}},allowOverlapping:{type:Boolean,default:!1,required:!1},graphemeMode:{type:Boolean,default:!1},selectedLabel:{type:Object,default:null,required:!1},relationMode:{type:Boolean,default:!1}},data:function(){return{entityMenuOpened:!1,relationMenuOpened:!1,x:0,y:0,startOffset:0,endOffset:0,entity:null,relation:null,selectedEntities:[]}},computed:{currentLabel:function(){var t=this;if(this.entity){var e=this.entityLabels.find((function(e){return e.id===t.entity.label}));return e}return null},currentRelationLabel:function(){var t=this;if(this.relation){var e=this.relationLabels.find((function(e){return e.id===t.relation.labelId}));return e}return null}},methods:{setOffset:function(t,e){this.startOffset=t,this.endOffset=e},setEntity:function(t){this.entity=this.entities.find((function(e){return e.id===t}))},setRelation:function(t){this.relation=this.relations.find((function(e){return e.id===t}))},setEntityForRelation:function(t,e){var n=this.entities.find((function(t){return t.id===e})),o=this.selectedEntities.findIndex((function(t){return t.id===n.id}));-1===o?this.selectedEntities.push(n):this.selectedEntities.splice(o,1),2===this.selectedEntities.length&&(this.selectedLabel?(this.addRelation(this.selectedLabel.id),this.cleanUp()):this.showRelationLabelMenu(t))},showEntityLabelMenu:function(t){var e=this;t.preventDefault(),this.entityMenuOpened=!1,this.x=t.clientX||t.changedTouches[0].clientX,this.y=t.clientY||t.changedTouches[0].clientY,this.$nextTick((function(){e.entityMenuOpened=!0}))},showRelationLabelMenu:function(t){var e=this;t.preventDefault(),this.relationMenuOpened=!1,this.x=t.clientX||t.changedTouches[0].clientX,this.y=t.clientY||t.changedTouches[0].clientY,this.$nextTick((function(){e.relationMenuOpened=!0}))},handleAddEvent:function(t,e,n){this.setOffset(e,n),this.selectedLabel?this.addOrUpdateEntity(this.selectedLabel.id):this.showEntityLabelMenu(t)},onEntityClicked:function(t,e){this.relationMode?this.setEntityForRelation(t,e):(this.setEntity(e),this.showEntityLabelMenu(t))},onRelationClicked:function(t,e){this.setRelation(e.id),this.showRelationLabelMenu(t)},addOrUpdateEntity:function(t){t?this.entity?this.updateEntity(t):this.addEntity(t):this.deleteEntity(this.entity),this.cleanUp()},addOrUpdateRelation:function(t){t?this.relation?this.updateRelation(t):this.addRelation(t):this.deleteRelation(this.relation),this.cleanUp()},addEntity:function(t){this.$emit("addEntity",this.startOffset,this.endOffset,t)},updateEntity:function(t){this.$emit("click:entity",this.entity.id,t)},deleteEntity:function(t){this.$emit("contextmenu:entity",t.id),this.cleanUp()},cleanUp:function(){this.entityMenuOpened=!1,this.relationMenuOpened=!1,this.entity=null,this.relation=null,this.startOffset=0,this.endOffset=0,this.selectedEntities=[]},addRelation:function(t){var e=(0,u.Z)(this.selectedEntities,2),n=e[0],o=e[1];this.$emit("addRelation",n.id,o.id,t)},updateRelation:function(t){this.$emit("click:relation",this.relation.id,t)},deleteRelation:function(t){this.$emit("contextmenu:relation",t.id)}}}),C=_,S=(0,v.Z)(C,c,d,!1,null,null,null),M=S.exports,$=n(9669),B=n.n($),K={name:"App",components:{EntityEditor:M},data:function(){return{step:0,text:"The teacher asks Anna to do the homework. The headteacher needs to borrow the classroom in advance.",entityTable:[{type:"Role",name:"The teacher"},{type:"Agent",name:"Anna"},{type:"Role",name:"The headteacher"},{type:"Intention",name:"do homework"},{type:"Intention",name:"borrow classroom"}],relationTable:[{type:"dependency",src:"The teacher",dest:"Anna"}],intentionTable:[{name:"do homework",pType:"Goal",dType:"dependency",dest:"The teacher - Anna"},{name:"borrow classroom",pType:"Goal",dType:"inside",dest:"The headteacher"}],mockAnnotator:{AE:{relationTypes:[],enableAutoLabeling:!1,rtl:!1,selectedLabelIndex:null,progress:{},relationMode:!1,entities:[{id:1,label:1,user:0,startOffset:0,endOffset:11},{id:2,label:2,user:0,startOffset:17,endOffset:21},{id:3,label:1,user:0,startOffset:42,endOffset:57}],entityLabels:[{id:1,text:"Role",prefixKey:null,suffixKey:null,backgroundColor:"#66ccff",textColor:"#ccbbaa"},{id:2,text:"Agent",prefixKey:null,suffixKey:null,backgroundColor:"#ffcc66",textColor:"#ccbbaa"}],relations:[],relationLabels:[],selectedEntities:[]},AR:{relationTypes:[],enableAutoLabeling:!1,rtl:!1,selectedLabelIndex:null,progress:{},relationMode:!1,relations:[{id:123,fromId:1,toId:2,labelId:11}],relationLabels:[{id:11,text:"Dependency",prefixKey:null,suffixKey:null,backgroundColor:"#9977dd",textColor:"#ccbbaa"},{id:12,text:"is-a",prefixKey:null,suffixKey:null,backgroundColor:"#66ccff",textColor:"#ccbbaa"},{id:13,text:"participate-in",prefixKey:null,suffixKey:null,backgroundColor:"#66ccff",textColor:"#ccbbaa"}],selectedEntities:[]},IE:{switchRelation:!1,relationTypes:[],enableAutoLabeling:!1,rtl:!1,selectedLabelIndex:null,progress:{},relationMode:!1,entities:[{id:1,label:101,user:0,startOffset:25,endOffset:27},{id:2,label:102,user:0,startOffset:32,endOffset:40},{id:3,label:101,user:0,startOffset:67,endOffset:73},{id:4,label:102,user:0,startOffset:78,endOffset:87}],entityLabels:[{id:1,text:"Goal",prefixKey:null,suffixKey:null,backgroundColor:"#66ffcc",textColor:"#ccbbaa"},{id:2,text:"Quality",prefixKey:null,suffixKey:null,backgroundColor:"#eeff22",textColor:"#ccbbaa"}],relations:[],relationLabels:[],selectedEntities:[]},II:{options:[{value:0,type:"dependency",rid:1,label:"The teacher - Anna"},{value:1,type:"inside",rid:1,label:"The teacher"},{value:2,type:"inside",rid:2,label:"Anna"},{value:3,type:"inside",rid:3,label:"The headteacher"}],phrases:[{id:0,type:"Goal",text:"do homework"}],select:[{id:0,pid:0,text:"",oid:0}]}}}},methods:{nextToAE:function(){var t=this;if(0!==this.step)throw"阶段与步骤数目不匹配";var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});B().post("http://"+window.location.hostname+":5050/ae",{text:this.text}).then((function(n){var o=n.data;for(var i in t.mockAnnotator.AE.entities=[],o){var a=o[i],l="Role"===a[0]?1:2;t.mockAnnotator.AE.entities.push({id:i,label:l,user:0,startOffset:a[1],endOffset:a[2]})}e.close(),t.step++}))},prevToBegin:function(){var t=this;if(1!==this.step)throw"阶段与步骤数目不匹配";var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){e.close(),t.step--}),200)},nextToAR:function(){var t=this;if(1!==this.step)throw"阶段与步骤数目不匹配";var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});B().post("http://"+window.location.hostname+":5050/ar",{text:this.text,entity:this.mockAnnotator.AE.entities}).then((function(n){var o=n.data;for(var i in t.mockAnnotator.AR.relations=[],o){var a=o[i],l=a[0],s=a[1],r=a[2];t.mockAnnotator.AR.relations.push({id:10*l+s,fromId:l,toId:s,labelId:r})}e.close(),t.step++}))},prevToAE:function(){var t=this;if(2!==this.step)throw"阶段与步骤数目不匹配";var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){e.close(),t.step--}),200)},nextToIE:function(){var t=this;if(2!==this.step)throw"阶段与步骤数目不匹配";var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});B().post("http://"+window.location.hostname+":5050/ie",{text:this.text}).then((function(e){var n=e.data;for(var o in t.mockAnnotator.IE.entities=[],n){var i=n[o],a="Goal"===i[0]?1:2;t.mockAnnotator.IE.entities.push({id:o,label:a,user:0,startOffset:i[1],endOffset:i[2]})}})),e.close(),this.step++},prevToAR:function(){var t=this;if(3!==this.step)throw"阶段与步骤数目不匹配";var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){e.close(),t.step--}),200)},nextToII:function(){var t=this;if(3!==this.step)throw"阶段与步骤数目不匹配";var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});for(var n in this.mockAnnotator.II.phrases=[],this.mockAnnotator.IE.entities){var o=this.mockAnnotator.IE.entities[n];this.mockAnnotator.II.phrases.push({id:o.id,type:1===o.label?"Goal":"Quality",text:this.text.substring(o.startOffset,o.endOffset)})}this.mockAnnotator.II.options=[];var i=0,a=function(e){var n=t.mockAnnotator.AR.relations[e];if(11===n.labelId){var o="";t.mockAnnotator.AE.entities.forEach((function(e){e.id===n.fromId&&(o+=t.text.substring(e.startOffset,e.endOffset)+" - ")})),t.mockAnnotator.AE.entities.forEach((function(e){e.id===n.toId&&(o+=t.text.substring(e.startOffset,e.endOffset))})),t.mockAnnotator.II.options.push({value:i,type:"dependency",rid:n.id,label:o}),i+=1}};for(var l in this.mockAnnotator.AR.relations)a(l);for(var s in this.mockAnnotator.AE.entities){var r=this.mockAnnotator.AE.entities[s];this.mockAnnotator.II.options.push({value:i,type:"inside",rid:r.id,label:this.text.substring(r.startOffset,r.endOffset)}),i+=1}this.mockAnnotator.II.select=[];for(var c=this.mockAnnotator.II.options.length,d=this.mockAnnotator.II.phrases.length,u=c>d?d:c,f=0;f<u;f++)u===c?this.mockAnnotator.II.select.push({id:f,pid:this.mockAnnotator.II.phrases[0].id,text:"",oid:this.mockAnnotator.II.options[f].value}):this.mockAnnotator.II.select.push({id:f,pid:this.mockAnnotator.II.phrases[f].id,text:"",oid:this.mockAnnotator.II.options[0].value});e.close(),this.step++},prevToIE:function(){var t=this;if(4!==this.step)throw"阶段与步骤数目不匹配";var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){e.close(),t.step--}),200)},nextToFin:function(){var t=this;if(4!==this.step)throw"阶段与步骤数目不匹配";var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.entityTable=[],this.mockAnnotator.AE.entities.forEach((function(e){t.entityTable.push({type:1===e.label?"Role":"Agent",name:t.text.substring(e.startOffset,e.endOffset)})})),this.mockAnnotator.II.phrases.forEach((function(e){t.entityTable.push({type:"Intention",name:e.text})})),this.relationTable=[],this.mockAnnotator.AR.relations.forEach((function(e){var n=t.mockAnnotator.AE.entities.find((function(t){return t.id===e.fromId})),o=t.mockAnnotator.AE.entities.find((function(t){return t.id===e.toId})),i=11===e.labelId?"Dependency":12===e.labelId?"is-a":"participate-in";t.relationTable.push({type:i,src:t.text.substring(n.startOffset,n.endOffset),dest:t.text.substring(o.startOffset,o.endOffset)})})),this.intentionTable=[],this.mockAnnotator.II.select.forEach((function(e){var n,o,i=t.mockAnnotator.II.phrases.find((function(t){return t.id===e.pid}));i?(n=i.text,o=i.type):(n=e.pid,o="Goal",e.pid=-1,e.text=n);var a=t.mockAnnotator.II.options.find((function(t){return t.value===e.oid})),l=a.type,s=a.label;t.intentionTable.push({name:n,pType:o,dType:l,dest:s})})),e.close(),this.step++,window.parent.postMessage((0,r.Z)((0,r.Z)({},this.mockAnnotator),{},{text:this.text}),"*")},prevToII:function(){var t=this;if(5!==this.step)throw"阶段与步骤数目不匹配";var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){for(var n in t.mockAnnotator.II.select){var o=t.mockAnnotator.II.select[n];-1===o.pid&&(o.pid=o.text)}e.close(),t.step--}),200)},handleAEEntityChange:function(t,e){this.mockAnnotator.AE.entities.forEach((function(n){n.id===t&&(n.label=e)}))},handleAEDeleteSpan:function(t){this.mockAnnotator.AE.entities.forEach((function(e,n,o){e.id===t&&o.splice(n,1)}))},handleAEAddSpan:function(t,e,n){var o=this.mockAnnotator.AE.entities.length;this.mockAnnotator.AE.entities.forEach((function(t){t.id>o&&(o=t.id)})),this.mockAnnotator.AE.entities.push({id:o+1,label:n,user:0,startOffset:t,endOffset:e})},handleIEEntityChange:function(t,e){this.mockAnnotator.IE.entities.forEach((function(n){n.id===t&&(n.label=e)}))},handleIEDeleteSpan:function(t){this.mockAnnotator.IE.entities.forEach((function(e,n,o){e.id===t&&o.splice(n,1)}))},handleIEAddSpan:function(t,e,n){var o=this.mockAnnotator.IE.entities.length;this.mockAnnotator.IE.entities.forEach((function(t){t.id>o&&(o=t.id)})),this.mockAnnotator.IE.entities.push({id:o+1,label:n,user:0,startOffset:t,endOffset:e})},handleARAddRelation:function(t,e,n){this.mockAnnotator.AR.relations.push({id:10*t+e,fromId:t,toId:e,labelId:n})},updateARRelation:function(t,e){this.mockAnnotator.AR.relations.forEach((function(n){n.id===t&&(n.labelId=e)}))},deleteARRelation:function(t){this.mockAnnotator.AR.relations.forEach((function(e,n,o){e.id===t&&o.splice(n,1)}))},delIISelect:function(t){var e=this.mockAnnotator.II.select.findIndex((function(e){return e.id===t}));this.mockAnnotator.II.select.splice(e,1)},addIISelect:function(){if(0!==this.mockAnnotator.II.options.length&&0!==this.mockAnnotator.II.phrases.length){var t=this.mockAnnotator.II.select.slice(-1)[0].id;this.mockAnnotator.II.select.push({id:t+1,pid:this.mockAnnotator.II.phrases[0].id,oid:this.mockAnnotator.II.options[0].value,text:""})}}}},Z=K,U=(0,v.Z)(Z,l,s,!1,null,null,null),q=U.exports,j=n(9132);o["default"].use(j.Z);var D=new j.Z({});o["default"].use(a()),new o["default"]({el:"#app",vuetify:D,render:function(t){return t(q)}})}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,a){if(!o){var l=1/0;for(d=0;d<t.length;d++){o=t[d][0],i=t[d][1],a=t[d][2];for(var s=!0,r=0;r<o.length;r++)(!1&a||l>=a)&&Object.keys(n.O).every((function(t){return n.O[t](o[r])}))?o.splice(r--,1):(s=!1,a<l&&(l=a));if(s){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[o,i,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,a,l=o[0],s=o[1],r=o[2],c=0;if(l.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(r)var d=r(n)}for(e&&e(o);c<l.length;c++)a=l[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(d)},o=self["webpackChunkmodel"]=self["webpackChunkmodel"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5772)}));o=n.O(o)})();
//# sourceMappingURL=app-legacy.6603c53b.js.map