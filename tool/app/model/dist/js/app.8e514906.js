(function(){"use strict";var t={5772:function(t,e,n){var o=n(144),i=n(4720),l=n.n(i),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-header",[n("el-steps",{attrs:{space:200,active:t.step,"finish-status":"success",simple:""}},[n("el-step",{attrs:{title:"Input Sentence",icon:"el-icon-edit"}}),n("el-step",{attrs:{title:"Actor Entity",icon:"el-icon-plus"}}),n("el-step",{attrs:{title:"Actor Relation",icon:"el-icon-plus"}}),n("el-step",{attrs:{title:"Intention Entity",icon:"el-icon-plus"}}),n("el-step",{attrs:{title:"Intention Matching",icon:"el-icon-plus"}}),n("el-step",{attrs:{title:"Finish",icon:"el-icon-picture"}})],1)],1),0===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("el-input",{attrs:{rows:12,type:"textarea",placeholder:"Please input req text..."},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)],1)],1),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:18}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.nextToAE}},[t._v(" Next ")])],1)],1)],1)],1):t._e(),1===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("entity-editor",{attrs:{"data-app":"",rtl:!1,text:this.text,entities:this.mockAnnotator.AE.entities,"entity-labels":this.mockAnnotator.AE.entityLabels,relations:this.mockAnnotator.AE.relations,"relation-labels":this.mockAnnotator.AE.relationLabels,"allow-overlapping":!1,"grapheme-mode":!1,"selected-label":null,"relation-mode":!1},on:{addEntity:t.handleAEAddSpan,"click:entity":t.handleAEEntityChange,"contextmenu:entity":t.handleAEDeleteSpan}})],1)],1)],1),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:16}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.prevToBegin}},[t._v(" Back ")])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.nextToAR}},[t._v(" Next ")])],1)],1)],1)],1):t._e(),2===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("entity-editor",{attrs:{"data-app":"",rtl:!1,text:this.text,entities:this.mockAnnotator.AE.entities,"entity-labels":this.mockAnnotator.AE.entityLabels,relations:this.mockAnnotator.AR.relations,"relation-labels":this.mockAnnotator.AR.relationLabels,"allow-overlapping":!1,"grapheme-mode":!1,"selected-label":null,"relation-mode":!0},on:{addRelation:t.handleARAddRelation,"click:relation":t.updateARRelation,"contextmenu:relation":t.deleteARRelation}})],1)],1)],1),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:16}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.prevToAE}},[t._v(" Back ")])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.nextToIE}},[t._v(" Next ")])],1)],1)],1)],1):t._e(),3===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("entity-editor",{attrs:{"data-app":"",rtl:!1,text:this.text,entities:this.mockAnnotator.IE.entities,"entity-labels":this.mockAnnotator.IE.entityLabels,relations:this.mockAnnotator.IE.relations,"relation-labels":this.mockAnnotator.IE.relationLabels,"allow-overlapping":!0,"grapheme-mode":!1,"selected-label":null,"relation-mode":!1},on:{addEntity:t.handleIEAddSpan,"click:entity":t.handleIEEntityChange,"contextmenu:entity":t.handleIEDeleteSpan}})],1)],1)],1),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:16}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.prevToAR}},[t._v(" Back ")])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.nextToII}},[t._v(" Next ")])],1)],1)],1)],1):t._e(),4===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" "+t._s(t.text)+" ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" Please match corresponding intentions（texts are editable）： ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),t._l(t.mockAnnotator.II.select,(function(e){return n("div",{key:e.id},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5,offset:6}},[n("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",filterable:"",placeholder:"请选择（可编辑）"},model:{value:e.pid,callback:function(n){t.$set(e,"pid",n)},expression:"item.pid"}},t._l(t.mockAnnotator.II.phrases,(function(t){return n("el-option",{key:t.id,attrs:{label:t.text,value:t.id}})})),1)],1),n("el-col",{attrs:{span:5,offset:0}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.oid,callback:function(n){t.$set(e,"oid",n)},expression:"item.oid"}},t._l(t.mockAnnotator.II.options,(function(t){return n("el-option",{key:t.rid,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-col",{attrs:{span:2,offset:0}},[n("el-button",{attrs:{plain:""},on:{click:function(n){return t.delIISelect(e.id)}}},[t._v(" x ")])],1)],1)],1)})),n("div",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:7,offset:11}},[n("el-button",{attrs:{plain:""},on:{click:t.addIISelect}},[t._v(" + ")])],1)],1)],1)],2),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:16}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.prevToIE}},[t._v(" Back ")])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.nextToFin}},[t._v(" Next ")])],1)],1)],1)],1):t._e(),5===t.step?n("div",[n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" Please confirm the iStar model: ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" Entity extraction ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.entityTable}},[n("el-table-column",{attrs:{prop:"type",label:"类型",width:"180"}}),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" Relation extraction ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.relationTable}},[n("el-table-column",{attrs:{prop:"type",label:"Type",width:"180"}}),n("el-table-column",{attrs:{prop:"src",label:"From",width:"180"}}),n("el-table-column",{attrs:{prop:"dest",label:"To",width:"180"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v("   ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[t._v(" Intention matching ")])],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16,offset:4}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.intentionTable}},[n("el-table-column",{attrs:{prop:"name",label:"Name",width:"180"}}),n("el-table-column",{attrs:{prop:"pType",label:"Intention type",width:"180"}}),n("el-table-column",{attrs:{prop:"dType",label:"Destination Type",width:"180"}}),n("el-table-column",{attrs:{prop:"dest",label:"Destination",width:"180"}})],1)],1)],1)],1),n("el-footer",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:18}},[n("el-button",{attrs:{color:"#246B29",plain:""},on:{click:t.prevToII}},[t._v(" Back ")])],1)],1)],1)],1):t._e()],1)},a=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{shortkey:t.cleanUp}},[n("v-annotator",{attrs:{rtl:t.rtl,text:t.text,entities:t.entities,"entity-labels":t.entityLabels,relations:t.relations,"relation-labels":t.relationLabels,"allow-overlapping":t.allowOverlapping,"grapheme-mode":t.graphemeMode,"selected-entities":t.selectedEntities},on:{"add:entity":t.handleAddEvent,"click:entity":t.onEntityClicked,"click:relation":t.onRelationClicked,"contextmenu:entity":t.deleteEntity,"contextmenu:relation":t.deleteRelation}}),n("labeling-menu",{attrs:{opened:t.entityMenuOpened,x:t.x,y:t.y,"selected-label":t.currentLabel,labels:t.entityLabels},on:{close:t.cleanUp,"click:label":t.addOrUpdateEntity}}),n("labeling-menu",{attrs:{opened:t.relationMenuOpened,x:t.x,y:t.y,"selected-label":t.currentRelationLabel,labels:t.relationLabels},on:{close:t.cleanUp,"click:label":t.addOrUpdateRelation}})],1)},c=[],d=n(4074),h=n.n(d),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{value:t.opened,"position-x":t.x,"position-y":t.y,absolute:"","offset-y":""},on:{input:t.close}},[n("v-list",{staticClass:"overflow-y-auto",attrs:{dense:"","min-width":"150","max-height":"400"}},[n("v-list-item",[n("v-autocomplete",{ref:"autocomplete",attrs:{items:t.labels,autofocus:"",dense:"","deletable-chips":"","hide-details":"","item-text":"text","item-value":"id",label:"Select a label","small-chips":""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._l(t.labels,(function(e,o){return n("v-list-item",{key:o,on:{click:function(n){return t.onLabelSelected(e.id)}}},[t.hasAnySuffixKey?n("v-list-item-action",[e.suffixKey?n("v-chip",{attrs:{color:e.backgroundColor,outlined:"",small:""},domProps:{textContent:t._s(e.suffixKey)}}):n("span",{staticClass:"mr-8"})],1):t._e(),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1)}))],2)],1)},u=[],f=o["default"].extend({props:{labels:{type:Array,default:()=>[],required:!0},opened:{type:Boolean,default:!1,required:!0},selectedLabel:{type:Object,default:null,required:!1},x:{type:Number,default:0,required:!0},y:{type:Number,default:0,required:!0}},data(){return{startOffset:0,endOffset:0,entity:null,fromEntity:null,toEntity:null}},computed:{hasAnySuffixKey(){return this.labels.some((t=>null!==t.suffixKey))},value:{get(){return this.selectedLabel},set(t){this.onLabelSelected(t)}}},methods:{close(){this.$nextTick((()=>{this.$refs.autocomplete&&(this.$refs.autocomplete.selectedItems=[])})),this.$emit("close")},onLabelSelected(t){this.$emit("click:label",t),this.close()}}}),b=f,m=n(1001),y=n(3453),A=n.n(y),k=n(1119),g=n(5424),x=n(8346),I=n(7620),E=n(3099),v=n(2786),w=n(9904),O=(0,m.Z)(b,p,u,!1,null,null,null),T=O.exports;A()(O,{VAutocomplete:k.Z,VChip:g.Z,VList:x.Z,VListItem:I.Z,VListItemAction:E.Z,VListItemContent:v.km,VListItemTitle:v.V9,VMenu:w.Z});var L=o["default"].extend({components:{VAnnotator:h(),LabelingMenu:T},props:{dark:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},text:{type:String,default:"",required:!0},entities:{type:Array,default:()=>[],required:!0},entityLabels:{type:Array,default:()=>[],required:!0},relations:{type:Array,default:()=>[]},relationLabels:{type:Array,default:()=>[]},allowOverlapping:{type:Boolean,default:!1,required:!1},graphemeMode:{type:Boolean,default:!1},selectedLabel:{type:Object,default:null,required:!1},relationMode:{type:Boolean,default:!1}},data(){return{entityMenuOpened:!1,relationMenuOpened:!1,x:0,y:0,startOffset:0,endOffset:0,entity:null,relation:null,selectedEntities:[]}},computed:{currentLabel(){if(this.entity){const t=this.entityLabels.find((t=>t.id===this.entity.label));return t}return null},currentRelationLabel(){if(this.relation){const t=this.relationLabels.find((t=>t.id===this.relation.labelId));return t}return null}},methods:{setOffset(t,e){this.startOffset=t,this.endOffset=e},setEntity(t){this.entity=this.entities.find((e=>e.id===t))},setRelation(t){this.relation=this.relations.find((e=>e.id===t))},setEntityForRelation(t,e){const n=this.entities.find((t=>t.id===e)),o=this.selectedEntities.findIndex((t=>t.id===n.id));-1===o?this.selectedEntities.push(n):this.selectedEntities.splice(o,1),2===this.selectedEntities.length&&(this.selectedLabel?(this.addRelation(this.selectedLabel.id),this.cleanUp()):this.showRelationLabelMenu(t))},showEntityLabelMenu(t){t.preventDefault(),this.entityMenuOpened=!1,this.x=t.clientX||t.changedTouches[0].clientX,this.y=t.clientY||t.changedTouches[0].clientY,this.$nextTick((()=>{this.entityMenuOpened=!0}))},showRelationLabelMenu(t){t.preventDefault(),this.relationMenuOpened=!1,this.x=t.clientX||t.changedTouches[0].clientX,this.y=t.clientY||t.changedTouches[0].clientY,this.$nextTick((()=>{this.relationMenuOpened=!0}))},handleAddEvent(t,e,n){this.setOffset(e,n),this.selectedLabel?this.addOrUpdateEntity(this.selectedLabel.id):this.showEntityLabelMenu(t)},onEntityClicked(t,e){this.relationMode?this.setEntityForRelation(t,e):(this.setEntity(e),this.showEntityLabelMenu(t))},onRelationClicked(t,e){this.setRelation(e.id),this.showRelationLabelMenu(t)},addOrUpdateEntity(t){t?this.entity?this.updateEntity(t):this.addEntity(t):this.deleteEntity(this.entity),this.cleanUp()},addOrUpdateRelation(t){t?this.relation?this.updateRelation(t):this.addRelation(t):this.deleteRelation(this.relation),this.cleanUp()},addEntity(t){this.$emit("addEntity",this.startOffset,this.endOffset,t)},updateEntity(t){this.$emit("click:entity",this.entity.id,t)},deleteEntity(t){this.$emit("contextmenu:entity",t.id),this.cleanUp()},cleanUp(){this.entityMenuOpened=!1,this.relationMenuOpened=!1,this.entity=null,this.relation=null,this.startOffset=0,this.endOffset=0,this.selectedEntities=[]},addRelation(t){const[e,n]=this.selectedEntities;this.$emit("addRelation",e.id,n.id,t)},updateRelation(t){this.$emit("click:relation",this.relation.id,t)},deleteRelation(t){this.$emit("contextmenu:relation",t.id)}}}),R=L,_=(0,m.Z)(R,r,c,!1,null,null,null),C=_.exports,S=n(9669),M=n.n(S),$={name:"App",components:{EntityEditor:C},data(){return{step:0,text:"The teacher asks Anna to do the homework. The headteacher needs to borrow the classroom in advance.",entityTable:[{type:"Role",name:"The teacher"},{type:"Agent",name:"Anna"},{type:"Role",name:"The headteacher"},{type:"Intention",name:"do homework"},{type:"Intention",name:"borrow classroom"}],relationTable:[{type:"dependency",src:"The teacher",dest:"Anna"}],intentionTable:[{name:"do homework",pType:"Goal",dType:"dependency",dest:"The teacher - Anna"},{name:"borrow classroom",pType:"Goal",dType:"inside",dest:"The headteacher"}],mockAnnotator:{AE:{relationTypes:[],enableAutoLabeling:!1,rtl:!1,selectedLabelIndex:null,progress:{},relationMode:!1,entities:[{id:1,label:1,user:0,startOffset:0,endOffset:11},{id:2,label:2,user:0,startOffset:17,endOffset:21},{id:3,label:1,user:0,startOffset:42,endOffset:57}],entityLabels:[{id:1,text:"Role",prefixKey:null,suffixKey:null,backgroundColor:"#66ccff",textColor:"#ccbbaa"},{id:2,text:"Agent",prefixKey:null,suffixKey:null,backgroundColor:"#ffcc66",textColor:"#ccbbaa"}],relations:[],relationLabels:[],selectedEntities:[]},AR:{relationTypes:[],enableAutoLabeling:!1,rtl:!1,selectedLabelIndex:null,progress:{},relationMode:!1,relations:[{id:123,fromId:1,toId:2,labelId:11}],relationLabels:[{id:11,text:"Dependency",prefixKey:null,suffixKey:null,backgroundColor:"#9977dd",textColor:"#ccbbaa"},{id:12,text:"is-a",prefixKey:null,suffixKey:null,backgroundColor:"#66ccff",textColor:"#ccbbaa"},{id:13,text:"participate-in",prefixKey:null,suffixKey:null,backgroundColor:"#66ccff",textColor:"#ccbbaa"}],selectedEntities:[]},IE:{switchRelation:!1,relationTypes:[],enableAutoLabeling:!1,rtl:!1,selectedLabelIndex:null,progress:{},relationMode:!1,entities:[{id:1,label:101,user:0,startOffset:25,endOffset:27},{id:2,label:102,user:0,startOffset:32,endOffset:40},{id:3,label:101,user:0,startOffset:67,endOffset:73},{id:4,label:102,user:0,startOffset:78,endOffset:87}],entityLabels:[{id:1,text:"Goal",prefixKey:null,suffixKey:null,backgroundColor:"#66ffcc",textColor:"#ccbbaa"},{id:2,text:"Quality",prefixKey:null,suffixKey:null,backgroundColor:"#eeff22",textColor:"#ccbbaa"}],relations:[],relationLabels:[],selectedEntities:[]},II:{options:[{value:0,type:"dependency",rid:1,label:"The teacher - Anna"},{value:1,type:"inside",rid:1,label:"The teacher"},{value:2,type:"inside",rid:2,label:"Anna"},{value:3,type:"inside",rid:3,label:"The headteacher"}],phrases:[{id:0,type:"Goal",text:"do homework"}],select:[{id:0,pid:0,text:"",oid:0}]}}}},methods:{nextToAE(){if(0!==this.step)throw"阶段与步骤数目不匹配";const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});M().post("http://"+window.location.hostname+":5050/ae",{text:this.text}).then((e=>{let n=e.data;this.mockAnnotator.AE.entities=[];for(let t in n){let e=n[t],o="Role"===e[0]?1:2;this.mockAnnotator.AE.entities.push({id:t,label:o,user:0,startOffset:e[1],endOffset:e[2]})}t.close(),this.step++}))},prevToBegin(){if(1!==this.step)throw"阶段与步骤数目不匹配";const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((()=>{t.close(),this.step--}),200)},nextToAR(){if(1!==this.step)throw"阶段与步骤数目不匹配";const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});M().post("http://"+window.location.hostname+":5050/ar",{text:this.text,entity:this.mockAnnotator.AE.entities}).then((e=>{let n=e.data;this.mockAnnotator.AR.relations=[];for(let t in n){let e=n[t],o=e[0],i=e[1],l=e[2];this.mockAnnotator.AR.relations.push({id:10*o+i,fromId:o,toId:i,labelId:l})}t.close(),this.step++}))},prevToAE(){if(2!==this.step)throw"阶段与步骤数目不匹配";const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((()=>{t.close(),this.step--}),200)},nextToIE(){if(2!==this.step)throw"阶段与步骤数目不匹配";const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});M().post("http://"+window.location.hostname+":5050/ie",{text:this.text}).then((t=>{let e=t.data;this.mockAnnotator.IE.entities=[];for(let n in e){let t=e[n],o="Goal"===t[0]?1:2;this.mockAnnotator.IE.entities.push({id:n,label:o,user:0,startOffset:t[1],endOffset:t[2]})}})),t.close(),this.step++},prevToAR(){if(3!==this.step)throw"阶段与步骤数目不匹配";const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((()=>{t.close(),this.step--}),200)},nextToII(){if(3!==this.step)throw"阶段与步骤数目不匹配";const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.mockAnnotator.II.phrases=[];for(let l in this.mockAnnotator.IE.entities){let t=this.mockAnnotator.IE.entities[l];this.mockAnnotator.II.phrases.push({id:t.id,type:1===t.label?"Goal":"Quality",text:this.text.substring(t.startOffset,t.endOffset)})}this.mockAnnotator.II.options=[];let e=0;for(let l in this.mockAnnotator.AR.relations){let t=this.mockAnnotator.AR.relations[l];if(11===t.labelId){let n="";this.mockAnnotator.AE.entities.forEach((e=>{e.id===t.fromId&&(n+=this.text.substring(e.startOffset,e.endOffset)+" - ")})),this.mockAnnotator.AE.entities.forEach((e=>{e.id===t.toId&&(n+=this.text.substring(e.startOffset,e.endOffset))})),this.mockAnnotator.II.options.push({value:e,type:"dependency",rid:t.id,label:n}),e+=1}}for(let l in this.mockAnnotator.AE.entities){let t=this.mockAnnotator.AE.entities[l];this.mockAnnotator.II.options.push({value:e,type:"inside",rid:t.id,label:this.text.substring(t.startOffset,t.endOffset)}),e+=1}this.mockAnnotator.II.select=[];let n=this.mockAnnotator.II.options.length,o=this.mockAnnotator.II.phrases.length,i=n>o?o:n;for(let l=0;l<i;l++)i===n?this.mockAnnotator.II.select.push({id:l,pid:this.mockAnnotator.II.phrases[0].id,text:"",oid:this.mockAnnotator.II.options[l].value}):this.mockAnnotator.II.select.push({id:l,pid:this.mockAnnotator.II.phrases[l].id,text:"",oid:this.mockAnnotator.II.options[0].value});t.close(),this.step++},prevToIE(){if(4!==this.step)throw"阶段与步骤数目不匹配";const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((()=>{t.close(),this.step--}),200)},nextToFin(){if(4!==this.step)throw"阶段与步骤数目不匹配";const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.entityTable=[],this.mockAnnotator.AE.entities.forEach((t=>{this.entityTable.push({type:1===t.label?"Role":"Agent",name:this.text.substring(t.startOffset,t.endOffset)})})),this.mockAnnotator.II.phrases.forEach((t=>{this.entityTable.push({type:"Intention",name:t.text})})),this.relationTable=[],this.mockAnnotator.AR.relations.forEach((t=>{let e=this.mockAnnotator.AE.entities.find((e=>e.id===t.fromId)),n=this.mockAnnotator.AE.entities.find((e=>e.id===t.toId)),o=11===t.labelId?"Dependency":12===t.labelId?"is-a":"participate-in";this.relationTable.push({type:o,src:this.text.substring(e.startOffset,e.endOffset),dest:this.text.substring(n.startOffset,n.endOffset)})})),this.intentionTable=[],this.mockAnnotator.II.select.forEach((t=>{let e,n,o=this.mockAnnotator.II.phrases.find((e=>e.id===t.pid));o?(e=o.text,n=o.type):(e=t.pid,n="Goal",t.pid=-1,t.text=e);let i=this.mockAnnotator.II.options.find((e=>e.value===t.oid)),l=i.type,s=i.label;this.intentionTable.push({name:e,pType:n,dType:l,dest:s})})),t.close(),this.step++,window.parent.postMessage({...this.mockAnnotator,text:this.text},"*")},prevToII(){if(5!==this.step)throw"阶段与步骤数目不匹配";const t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((()=>{for(let t in this.mockAnnotator.II.select){let e=this.mockAnnotator.II.select[t];-1===e.pid&&(e.pid=e.text)}t.close(),this.step--}),200)},handleAEEntityChange(t,e){this.mockAnnotator.AE.entities.forEach((n=>{n.id===t&&(n.label=e)}))},handleAEDeleteSpan(t){this.mockAnnotator.AE.entities.forEach(((e,n,o)=>{e.id===t&&o.splice(n,1)}))},handleAEAddSpan(t,e,n){let o=this.mockAnnotator.AE.entities.length;this.mockAnnotator.AE.entities.forEach((t=>{t.id>o&&(o=t.id)})),this.mockAnnotator.AE.entities.push({id:o+1,label:n,user:0,startOffset:t,endOffset:e})},handleIEEntityChange(t,e){this.mockAnnotator.IE.entities.forEach((n=>{n.id===t&&(n.label=e)}))},handleIEDeleteSpan(t){this.mockAnnotator.IE.entities.forEach(((e,n,o)=>{e.id===t&&o.splice(n,1)}))},handleIEAddSpan(t,e,n){let o=this.mockAnnotator.IE.entities.length;this.mockAnnotator.IE.entities.forEach((t=>{t.id>o&&(o=t.id)})),this.mockAnnotator.IE.entities.push({id:o+1,label:n,user:0,startOffset:t,endOffset:e})},handleARAddRelation(t,e,n){this.mockAnnotator.AR.relations.push({id:10*t+e,fromId:t,toId:e,labelId:n})},updateARRelation(t,e){this.mockAnnotator.AR.relations.forEach((n=>{n.id===t&&(n.labelId=e)}))},deleteARRelation(t){this.mockAnnotator.AR.relations.forEach(((e,n,o)=>{e.id===t&&o.splice(n,1)}))},delIISelect(t){let e=this.mockAnnotator.II.select.findIndex((e=>e.id===t));this.mockAnnotator.II.select.splice(e,1)},addIISelect(){if(0===this.mockAnnotator.II.options.length)return;if(0===this.mockAnnotator.II.phrases.length)return;let t=this.mockAnnotator.II.select.slice(-1)[0].id;this.mockAnnotator.II.select.push({id:t+1,pid:this.mockAnnotator.II.phrases[0].id,oid:this.mockAnnotator.II.options[0].value,text:""})}}},B=$,K=(0,m.Z)(B,s,a,!1,null,null,null),U=K.exports,q=n(9132);o["default"].use(q.Z);var Z=new q.Z({});o["default"].use(l()),new o["default"]({el:"#app",vuetify:Z,render:t=>t(U)})}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var l=e[o]={exports:{}};return t[o](l,l.exports,n),l.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,l){if(!o){var s=1/0;for(d=0;d<t.length;d++){o=t[d][0],i=t[d][1],l=t[d][2];for(var a=!0,r=0;r<o.length;r++)(!1&l||s>=l)&&Object.keys(n.O).every((function(t){return n.O[t](o[r])}))?o.splice(r--,1):(a=!1,l<s&&(s=l));if(a){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}l=l||0;for(var d=t.length;d>0&&t[d-1][2]>l;d--)t[d]=t[d-1];t[d]=[o,i,l]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,l,s=o[0],a=o[1],r=o[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(r)var d=r(n)}for(e&&e(o);c<s.length;c++)l=s[c],n.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return n.O(d)},o=self["webpackChunkmodel"]=self["webpackChunkmodel"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5772)}));o=n.O(o)})();
//# sourceMappingURL=app.8e514906.js.map